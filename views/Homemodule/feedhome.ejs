<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>feedhome page</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="/css/BottomNavmodule/bottomnavbar.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/Homemodule/style_hh.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
      integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://kit.fontawesome.com/2635296004.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <script>
      let randVideoIds = JSON.parse('<%- JSON.stringify(randVideoIds) %>');
      let mode = JSON.parse('<%- JSON.stringify(mode) %>');
    </script>
    <div class="feedhomepage">
      <div class="container logo-title" style="margin-top: 10px; margin-bottom: 10px">
        <div class="row">
          <div class="col-3 jcc hcl-circle" style="padding: 5px 0px 0 0px !important; width: 15%; text-align: left;">
            <img src="/img/hcl-logo.png" />
          </div>
          <div class="col-6 jcc" id="happy-logo" style="width:70%">
            <img src="/img/homefeed-logo.png" />
          </div>
          <div class="col-3 jcc user-image" style="padding: 5px 0px 0 0px !important; width: 15%; text-align: right;">
            <img onclick="window.location.href='/career/profile'" style="cursor: pointer;" src="/image/<%= user.profilePic ? user.profilePic : 'sample' %>" />
          </div>
        </div>
      </div>

      <!-- <div class="row clashtypediv">
        <div class="col-6 publicdiv">
          <button
            class="btn btn-light clashtype"
            id="public"
            onclick="changeColor()"
          >
            Public Clash
          </button>
        </div>
        <div class="col-6 friendsdiv">
          <button
            class="btn btn-light clashtype"
            id="friends"
            onclick="changeColor()"
          >
            Friends Clash
          </button>
        </div>
      </div> -->

      <div class="clashtypediv">
        <div id="public" onclick="changeColor()">
          Public Clash
        </div>
        <div id="friends" onclick="changeColor()">
          Friends Clash
        </div>
      </div>

      <div class="container search-bar" style="margin-top: 10px; margin-bottom: 10px">
        <div class="form-group has-feedback"></div>
        <form action="#" method="POST" id="bor">
          <div class="input-group">
            <span class="input-group-addon"
              ><i class="fas fa-search" id="searchicon"></i
            ></span>
            <input
              class="form-control"
              type="search"
              placeholder="Search clashes around the world"
              id="inputSuccess2"
            />
          </div>
        </form>
      </div>
    </div>

    <%let recommend = ['Acting','Acrobats','Comedy','Dance','Drama','Music'];%>
    <%
      let randIndices = [], count = 6;
      while(count){
        let randIndex = Math.floor(Math.random()*recommend.length)
        if (randIndices.includes(randIndex)) continue
        randIndices.push(randIndex)
        count--
      }
    %> 
    <div class="row badgesdiv">
      <% randIndices.forEach(i => { %>
        <div class="col badges">
          <a href="#">
            <span class="badge bg-light" onclick="badgeClick(this)"><%= recommend[i] %></span>
          </a>
        </div>
      <% }) %> 
      <div class="col-1" id="redisplaydiv" onclick="reload()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" id="redisplay" viewBox="0 0 24 24"><path d="M20.944 12.979c-.489 4.509-4.306 8.021-8.944 8.021-2.698 0-5.112-1.194-6.763-3.075l1.245-1.633c1.283 1.645 3.276 2.708 5.518 2.708 3.526 0 6.444-2.624 6.923-6.021h-2.923l4-5.25 4 5.25h-3.056zm-15.864-1.979c.487-3.387 3.4-6 6.92-6 2.237 0 4.228 1.059 5.51 2.698l1.244-1.632c-1.65-1.876-4.061-3.066-6.754-3.066-4.632 0-8.443 3.501-8.941 8h-3.059l4 5.25 4-5.25h-2.92z"/></svg>
      </div>
    </div>

    <div id="carouselExampleDark" class="carousel carousel-dark slide mt" style="margin-bottom: 50px" data-bs-ride="carousel">
      <% if(!videos.length){ %>
        <p>Their are no Public clash videos rigth now</p>
      <% } else { %>
        <% videos.forEach((video, index) => { %>
          <% if(index < 5){ %>
            <div class="carousel-inner">
              <div class="carousel-item active" data-bs-interval="36000000">
                <div class="row profile-title">
                  <div class="col-2 jcc" style="padding: 0 12px !important;">
                    <img src="/image/<%= video.userData.profilePic ? video.userData.profilePic : 'sample' %>" class="car1" alt="image"/>
                  </div>
                  <div class="col-6" id="profiletitle" style="text-align: start; padding-left: 5px">
                    <div class="profile-name"><%= video.userData.username %> </div>
                    <div class="fontsize"><%= video.userData.name %>  , <%= video.userData.city %> </div>
                  </div>
                  <div class="col" id="timeleft">
                    <i class="far fa-clock"></i>
                    <%= moment(new Date(video.clashData.endDate), 'YYYYMMDD').fromNow() %>
                  </div>
                </div>
                <div id="profilevideo">
                  <video class="vid" muted autoplay loop>
                    <source src="/video/<%= video.video._id %>" type="video/mp4" />
                  </video>
                  <div class="duration">1:20</div>
                  <div class="challenge-details">
                  <p class="challenge-title"><%= video.clashData.title %> </p>
                  <p class="author-name">Started by <%= video.clashData.username %> </p>
                  <div class="interactions">
                    <p><%= video.video.likes.length %>  Likes</p>
                    <p><%= video.video.comments.length %>  Comments</p>
                    <p><%= video.clashData.participants.length %>  Participants</p>
                  </div>
                </div>
                </div>
              </div>
            </div>
          <% } %>
        <% }) %> 
      <% } %> 
      <br id="br">
      <!-- advertisments -->
      <!-- <div class="row align-items-center" style="background: #3C95E799; height: 6rem; background-image: url(/img/adimg.png);">
        <div class="col d-flex justify-content-around">
            <h1 style="color: white;"><b> ShopVille </b></h1>
        </div>
        <div class="col d-flex justify-content-around">
            <button class="btn-sm" style="background-color: white; border: none;" onclick="addButton(this)">
                <b> SHOP NOW </b>
            </button>
        </div>
      </div> -->
    </div>

    <div style="display: flex; justify-content: space-around; margin-bottom: 50px;" id="load">
      <p onclick="loadmore(this)">Load more</p>
      <button>go top</button>
    </div>

    <% let url = '/homefeed'%> <%- include("../BottomNavmodule/bottomnavbar") %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
      integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer">
      </script>
    <script type="text/javascript" src="/js/Authmodule/common.js"></script>
    <script type="text/javascript" src="/js/Homemodule/feedhome.js"></script>
  </body>
</html>
